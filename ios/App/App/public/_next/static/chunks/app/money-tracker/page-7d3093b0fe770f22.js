(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[644],{30285:(e,t,a)=>{"use strict";a.d(t,{$:()=>d});var s=a(95155);a(12115);var n=a(99708),r=a(74466),i=a(59434);let l=(0,r.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function d(e){let{className:t,variant:a,size:r,asChild:d=!1,...o}=e,c=d?n.DX:"button";return(0,s.jsx)(c,{"data-slot":"button",className:(0,i.cn)(l({variant:a,size:r,className:t})),...o})}},55180:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>eE});var s=a(95155),n=a(12115),r=a(198);let i="keyval",l=async()=>(0,r.P2)("AppStorage",1,{upgrade(e){e.objectStoreNames.contains(i)||e.createObjectStore(i)}});var d=a(51368);function o(e){let{onAdd:t,onUpdate:a,editingEntry:r,cancelEdit:i,budgetId:l}=e,[o,u]=(0,n.useState)(""),[m,x]=(0,n.useState)(""),[g,h]=(0,n.useState)(c()),[p,f]=(0,n.useState)("");(0,n.useEffect)(()=>{r?(u(r.amount.toString()),x(r.item||""),h(r.date),f(r.description||"")):v()},[null==r?void 0:r.id]);let v=()=>{u(""),x(""),h(c()),f("")},b=e=>{try{let t=e.replace(/[^-()\d/*+.]/g,""),a=Function('"use strict"; return ('.concat(t,")"))();return"number"!=typeof a||isNaN(a)?0:a}catch(e){return 0}};return(0,s.jsxs)("form",{onSubmit:e=>{e.preventDefault();let s=b(o),n={id:r?r.id:(0,d.A)(),amount:s,item:m.trim()||void 0,date:g,description:p.trim()||void 0,budgetId:l};r?a(n):t(n),v(),i()},className:"space-y-4",children:[(0,s.jsx)("input",{type:"text",inputMode:"decimal",pattern:"[0-9+\\\\-*/(). ]*",placeholder:"Amount (e.g. 10+5+3.25)",value:o,onChange:e=>u(e.target.value),required:!0,className:"w-full px-3 py-2 border rounded"}),(0,s.jsxs)("div",{className:"text-sm text-muted-foreground",children:["Parsed amount: ",(0,s.jsxs)("strong",{children:["₱",b(o).toFixed(2)]})]}),(0,s.jsx)("input",{type:"text",placeholder:"Item (optional)",value:m,onChange:e=>x(e.target.value),className:"w-full px-3 py-2 border rounded"}),(0,s.jsx)("input",{type:"datetime-local",value:g,onChange:e=>h(e.target.value),required:!0,className:"w-full px-3 py-2 border rounded"}),(0,s.jsx)("input",{type:"text",placeholder:"Description (optional)",value:p,onChange:e=>f(e.target.value),className:"w-full px-3 py-2 border rounded"}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded",children:r?"Save Changes":"Add Entry"}),r&&(0,s.jsx)("button",{type:"button",onClick:()=>{v(),i()},className:"px-4 py-2 bg-gray-500 text-white rounded",children:"Cancel"})]})]})}function c(){let e=new Date,t=e.getTimezoneOffset();return new Date(e.getTime()-60*t*1e3).toISOString().slice(0,16)}var u=a(10351),m=a(70514),x=a(8093),g=a(15452),h=a(54416),p=a(59434);function f(e){let{...t}=e;return(0,s.jsx)(g.bL,{"data-slot":"dialog",...t})}function v(e){let{...t}=e;return(0,s.jsx)(g.l9,{"data-slot":"dialog-trigger",...t})}function b(e){let{...t}=e;return(0,s.jsx)(g.ZL,{"data-slot":"dialog-portal",...t})}function j(e){let{className:t,...a}=e;return(0,s.jsx)(g.hJ,{"data-slot":"dialog-overlay",className:(0,p.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...a})}function y(e){let{className:t,children:a,showCloseButton:n=!0,...r}=e;return(0,s.jsxs)(b,{"data-slot":"dialog-portal",children:[(0,s.jsx)(j,{}),(0,s.jsxs)(g.UC,{"data-slot":"dialog-content",className:(0,p.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",t),...r,children:[a,n&&(0,s.jsxs)(g.bm,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[(0,s.jsx)(h.A,{}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function N(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"dialog-header",className:(0,p.cn)("flex flex-col gap-2 text-center sm:text-left",t),...a})}function w(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"dialog-footer",className:(0,p.cn)("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",t),...a})}function k(e){let{className:t,...a}=e;return(0,s.jsx)(g.hE,{"data-slot":"dialog-title",className:(0,p.cn)("text-lg leading-none font-semibold",t),...a})}function S(e){let{className:t,...a}=e;return(0,s.jsx)(g.VY,{"data-slot":"dialog-description",className:(0,p.cn)("text-muted-foreground text-sm",t),...a})}var D=a(30285);function C(e){let{open:t,onClose:a,onConfirm:n,title:r="Delete",description:i="Are you sure you want to delete this?",confirmLabel:l="Delete",cancelLabel:d="Cancel",destructive:o=!0}=e;return(0,s.jsx)(f,{open:t,onOpenChange:a,children:(0,s.jsxs)(y,{children:[(0,s.jsxs)(N,{children:[(0,s.jsx)(k,{children:r}),(0,s.jsx)(S,{children:i})]}),(0,s.jsxs)(w,{className:"flex justify-end gap-2",children:[(0,s.jsx)(D.$,{variant:"ghost",onClick:a,children:d}),(0,s.jsx)(D.$,{variant:o?"destructive":"default",onClick:()=>{n(),a()},children:l})]})]})})}function B(e){let{entries:t,onEdit:a,onDelete:r,recurring:i}=e,[l,d]=(0,n.useState)(null);if(0===t.length)return(0,s.jsx)("p",{className:"text-gray-500 dark:text-gray-400",children:"No entries yet."});let o=[...t].sort((e,t)=>new Date(t.date).getTime()-new Date(e.date).getTime()),c=e=>new Date(e).toLocaleString("en-PH",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}),g=i?o.reduce((e,t)=>{let a=function(e){let t=new Date(e),a=t.getFullYear(),s=t.getMonth(),n=t.getDate(),r=new Date(a,s,n<=15?1:16),i=new Date(a,s,n<=15?15:new Date(a,s+1,0).getDate());return"".concat((0,m.GP)(r,"MMM d",{locale:x.c}),"–").concat((0,m.GP)(i,"d",{locale:x.c}),", ").concat(a)}(t.date);return e[a]||(e[a]=[]),e[a].push(t),e},{}):{All:o};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"space-y-4",children:Object.entries(g).map(e=>{let[t,n]=e;return(0,s.jsxs)("div",{children:[i&&(0,s.jsx)("h3",{className:"text-sm font-medium text-muted-foreground mb-1 dark:text-gray-400",children:t}),(0,s.jsx)("ul",{className:"space-y-1.5",children:n.map(e=>{var t;return(0,s.jsx)("li",{className:"border p-3 rounded-xl shadow-sm bg-white dark:bg-zinc-800 dark:border-zinc-700",children:(0,s.jsxs)("div",{className:"flex justify-between items-start gap-3 sm:gap-6",children:[(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("p",{className:"font-medium text-sm text-gray-800 dark:text-gray-100 truncate",children:(null==(t=e.item)?void 0:t.trim())||"Unspecified"}),e.description&&(0,s.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:e.description}),(0,s.jsx)("p",{className:"text-[11px] text-gray-400 dark:text-gray-500",children:c(e.date)})]}),(0,s.jsxs)("div",{className:"flex flex-col items-end gap-1 whitespace-nowrap",children:[(0,s.jsxs)("span",{className:"font-bold text-red-500 text-sm",children:["-₱",e.amount.toFixed(2)]}),(0,s.jsxs)("div",{className:"flex gap-1",children:[(0,s.jsx)("button",{onClick:()=>a(e),className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 p-1",title:"Edit",children:(0,s.jsx)(u.SG1,{className:"w-4 h-4"})}),(0,s.jsx)("button",{onClick:()=>d(e),className:"text-red-500 hover:text-red-800 dark:hover:text-red-400 p-1",title:"Delete",children:(0,s.jsx)(u.Q_v,{className:"w-4 h-4"})})]})]})]})},e.id)})})]},t)})}),(0,s.jsx)(C,{open:null!==l,onClose:()=>d(null),onConfirm:()=>{l&&r(l.id)},title:"Delete Entry",description:'Are you sure you want to delete "'.concat(null==l?void 0:l.item,'"?'),confirmLabel:"Delete",cancelLabel:"Cancel",destructive:!0})]})}function z(e){let{expenses:t,formatPeriodLabel:a,activePeriodKey:n}=e,r=t.filter(e=>{let{period:t,amount:a}=e;return t===n&&a>0});return(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("h4",{className:"text-sm font-medium text-muted-foreground",children:"Recent Top Expenses"}),0===r.length&&(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"No expenses for this period."}),r.map((e,t)=>{let{period:n,item:r,amount:i}=e;return(0,s.jsxs)("div",{className:"flex justify-between items-center p-3 bg-gray-50 dark:bg-gray-700/30 rounded-lg",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium",children:r||"Unspecified"}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:a(n)})]}),(0,s.jsxs)("p",{className:"font-semibold",children:["₱",i.toLocaleString("en-PH",{minimumFractionDigits:2})]})]},"".concat(n,"-").concat(r,"-").concat(i,"-").concat(t))})]})}var E=a(71539);function P(e){let{peakPeriodKey:t,peakPeriodData:a,formatPeriodLabel:n}=e;return(0,s.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-700/50 p-4 rounded-lg",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 text-muted-foreground mb-1",children:[(0,s.jsx)(E.A,{className:"w-4 h-4 text-yellow-500"}),(0,s.jsx)("span",{className:"text-xs",children:"Peak Spending Period"})]}),(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("p",{className:"font-semibold text-sm",children:n(t)}),(0,s.jsxs)("p",{className:"text-sm text-muted-foreground",children:["₱",a.total.toLocaleString("en-PH",{minimumFractionDigits:2})]})]})]})}let A="budgets",L=async()=>(0,r.P2)("BudgetApp",1,{upgrade(e){e.objectStoreNames.contains(A)||e.createObjectStore(A)}}),F=async(e,t)=>{let a=await L();await a.put(A,t,e)},O=async e=>(await L()).get(A,e),_=e=>new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP",minimumFractionDigits:2,maximumFractionDigits:2}).format(e);function M(e){let{showBudgetHistory:t,setShowBudgetHistory:a,periodBudgets:r,updateBudget:i,currentPeriodKey:l,currentBudget:d,formatPeriodLabel:o}=e;(0,n.useEffect)(()=>{t&&i(d,l)},[t,l,d,i]);let c=(0,n.useMemo)(()=>Object.entries(r).filter(e=>{let[,t]=e;return t>0}).sort((e,t)=>{let[a]=e,[s]=t;return s.localeCompare(a)}),[r]);return(0,s.jsx)(f,{open:t,onOpenChange:a,children:(0,s.jsxs)(y,{children:[(0,s.jsxs)(N,{children:[(0,s.jsx)(k,{children:"Budget History"}),(0,s.jsx)(S,{children:"Historical budget entries by period"})]}),(0,s.jsx)("div",{className:"max-h-[60vh] overflow-y-auto space-y-2",children:c.length>0?c.map(e=>{let[t,a]=e;return(0,s.jsxs)("div",{className:"flex justify-between items-center p-2 border rounded",children:[(0,s.jsx)("span",{className:"font-medium truncate",children:o(t)}),(0,s.jsx)("span",{className:"text-right tabular-nums",children:_(a)})]},t)}):(0,s.jsx)("p",{className:"text-muted-foreground text-center py-4",children:"No historical budgets found."})})]})})}var I=a(89917),H=a(29676),$=a(62523),R=a(5196);function T(e){let{tempBudget:t,setTempBudget:a,handleBudgetSave:n,handleBudgetCancel:r}=e;return(0,s.jsxs)("form",{onSubmit:e=>{e.preventDefault(),n()},className:"flex items-center gap-2",children:[(0,s.jsxs)("div",{className:"relative flex-1",children:[(0,s.jsx)("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground",children:"₱"}),(0,s.jsx)($.p,{value:t,onChange:e=>a(e.target.value),className:"pl-8 text-lg",autoFocus:!0,type:"number",min:"0"})]}),(0,s.jsxs)(D.$,{type:"submit",size:"icon",className:"h-9 w-9",variant:"default",children:[(0,s.jsx)(R.A,{className:"w-4 h-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Save"})]}),(0,s.jsxs)(D.$,{type:"button",size:"icon",variant:"outline",onClick:r,className:"h-9 w-9",children:[(0,s.jsx)(h.A,{className:"w-4 h-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Cancel"})]})]})}function U(e){let{totalSpent:t,budget:a,percentageUsed:n,remaining:r,isEditingBudget:i,setIsEditingBudget:l,setShowBudgetHistory:d,tempBudget:o,setTempBudget:c,handleBudgetSave:u,handleBudgetCancel:m}=e;if(a<=0)return(0,s.jsx)("div",{className:"space-y-1 text-center",children:(0,s.jsx)("div",{className:"text-sm text-muted-foreground italic",children:"Budget not set"})});let x=r<0,g=n>90,h=n>75&&!g,p=x||g?"bg-red-500":h?"bg-yellow-500":"bg-blue-500";return(0,s.jsxs)("div",{className:"space-y-2 w-full flex flex-col items-center text-center",children:[(0,s.jsx)("div",{className:"flex flex-wrap items-center justify-center gap-2 text-sm font-medium",children:i?(0,s.jsx)(T,{tempBudget:o,setTempBudget:c,handleBudgetSave:u,handleBudgetCancel:m}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("span",{className:"text-muted-foreground text-sm",children:[_(t)," /"," "]}),(0,s.jsx)("span",{className:"text-2xl font-bold",children:_(a)}),(0,s.jsx)("button",{onClick:()=>l(!0),className:"p-1 text-muted-foreground hover:text-foreground",title:"Edit budget",children:(0,s.jsx)(I.A,{className:"w-4 h-4"})}),(0,s.jsx)("button",{onClick:()=>d(!0),className:"p-1 text-muted-foreground hover:text-foreground",title:"Budget history",children:(0,s.jsx)(H.A,{className:"w-4 h-4"})}),(0,s.jsxs)("span",{className:"text-xs text-muted-foreground",children:["(",Math.round(n),"%)"]})]})}),(0,s.jsx)("div",{className:"h-2 w-full max-w-md bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:(0,s.jsx)("div",{className:"h-full ".concat(p," transition-all duration-500"),style:{width:"".concat(Math.min(n,100),"%")}})}),(0,s.jsx)("div",{className:"text-xs",children:(0,s.jsxs)("div",{className:"".concat(x?"text-red-600 dark:text-red-400":"text-green-600 dark:text-green-400"),children:[x?"Over Budget":"Remaining",": ",_(Math.abs(r)),h&&!x&&(0,s.jsx)("span",{className:"ml-1 text-yellow-600 dark:text-yellow-400",children:"(Approaching limit)"})]})})]})}function G(e){let{isEditingBudget:t,budget:a,percentageUsed:n,tempBudget:r,setTempBudget:i,handleBudgetSave:l,handleBudgetCancel:d,setIsEditingBudget:o,setShowBudgetHistory:c}=e,u=a*n/100;return(0,s.jsx)("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:(0,s.jsx)("div",{className:"flex-1 w-full",children:a>0?(0,s.jsx)(U,{totalSpent:u,budget:a,percentageUsed:n,remaining:a-u,isEditingBudget:t,setIsEditingBudget:o,setShowBudgetHistory:c,tempBudget:r,setTempBudget:i,handleBudgetSave:l,handleBudgetCancel:d}):(0,s.jsx)("div",{className:"text-xs text-muted-foreground italic",children:"Budget not set"})})})}var K=a(68500),Y=a(33109);function q(e){let{icon:t,label:a,value:n,isPositive:r}=e;return(0,s.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-700/50 p-4 rounded-lg",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 text-muted-foreground mb-1",children:[t,(0,s.jsx)("span",{className:"text-xs",children:a})]}),(0,s.jsx)("p",{className:"text-lg font-semibold ".concat(void 0!==r?r?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400":""),children:n})]})}function V(e){let{totalDebt:t,totalSavings:a,onPayDebt:n}=e;return(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsx)(q,{icon:(0,s.jsx)(K.A,{className:"w-4 h-4"}),label:"Total Debt",value:_(t),isPositive:!1}),(0,s.jsx)(q,{icon:(0,s.jsx)(Y.A,{className:"w-4 h-4"}),label:"Total Savings",value:_(a),isPositive:a>=0}),t>0&&a>0&&n&&(0,s.jsx)("div",{className:"col-span-2",children:(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsxs)("div",{className:"text-sm text-muted-foreground text-center",children:["You can pay ",_(Math.min(t,a))," of your debt"]}),(0,s.jsx)("div",{className:"flex items-center justify-center",children:(0,s.jsx)(D.$,{size:"sm",variant:"outline",onClick:()=>n(Math.min(t,a)),children:"Pay Full Amount"})})]})})]})}var J=a(50741),Q=a(83540),W=a(93774),Z=a(96025),X=a(16238),ee=a(94517),et=a(17398),ea=a(51362);let es=e=>{var t,a,n;let{active:r,payload:i,label:l}=e;if(!r||!(null==i?void 0:i.length))return null;let d=null==(t=i.find(e=>"Spent"===e.name))?void 0:t.value,o=null==(a=i.find(e=>"Savings"===e.name))?void 0:a.value,c=null==(n=i[0].payload)?void 0:n.budget;return(0,s.jsxs)("div",{className:"rounded-lg border border-border bg-popover px-3 py-2 text-xs shadow-md text-foreground space-y-1.5",children:[(0,s.jsxs)("div",{className:"text-muted-foreground",children:["Period: ",l]}),(0,s.jsxs)("div",{className:"grid grid-cols-3 gap-2",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"text-sm font-semibold text-blue-500",children:["₱",c.toLocaleString("en-PH",{minimumFractionDigits:2})]}),(0,s.jsx)("div",{className:"font-medium text-muted-foreground",children:"Budget"})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"text-sm font-semibold text-red-500",children:["₱",d.toLocaleString("en-PH",{minimumFractionDigits:2})]}),(0,s.jsx)("div",{className:"font-medium text-muted-foreground",children:"Spent"})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"text-sm font-semibold ".concat(o>=0?"text-emerald-600":"text-red-500"),children:["₱",Math.abs(o).toLocaleString("en-PH",{minimumFractionDigits:2})]}),(0,s.jsx)("div",{className:"font-medium text-muted-foreground",children:o>=0?"Saved":"Overspent"})]})]})]})};function en(e){let{periods:t,periodBudgets:a,formatPeriodLabel:r,onBudgetChange:i,disableEditFor:l}=e,{theme:d}=(0,ea.D)(),[o,c]=(0,n.useState)(null),[u,m]=(0,n.useState)(0),x=t.map(e=>{var t;let[s,n]=e,i=null!=(t=a[s])?t:0,l=n.total,d=Math.max(i-l,0);return{period:s,label:r(s),total:l,budget:i,savings:d}}).filter(e=>0!==e.total||0!==e.budget||0!==e.savings);if(0===x.length)return null;let h="dark"===d,p={foreground:h?"#f4f4f5":"#0c0c0d",border:h?"#3f3f46":"#e4e4e7",primary:"#3b82f6",secondary:"#10b981",danger:"#ef4444"};return(0,s.jsxs)("div",{className:"space-y-8",children:[(0,s.jsx)("div",{className:"h-[260px] sm:h-[480px] lg:h-[520px] rounded-2xl bg-card shadow-md overflow-x-auto border",children:(0,s.jsx)("div",{className:"w-full h-full px-2 sm:px-4 pt-2 pb-0",children:(0,s.jsx)(Q.u,{width:"100%",height:"100%",children:(0,s.jsxs)(W.E,{data:x,margin:{top:20,right:20,left:0,bottom:0},barSize:12,children:[(0,s.jsx)(Z.W,{dataKey:"label",tick:{fontSize:11,fill:p.foreground},interval:0,angle:-15,textAnchor:"end",height:50,tickLine:!1,axisLine:{stroke:p.border}}),(0,s.jsx)(X.h,{tick:{fontSize:11,fill:p.foreground},tickLine:!1,axisLine:{stroke:p.border},tickFormatter:e=>"₱".concat(e.toLocaleString())}),(0,s.jsx)(ee.m,{content:(0,s.jsx)(es,{})}),(0,s.jsx)(et.y,{dataKey:"budget",name:"Budget",radius:[4,4,0,0],fill:p.primary}),(0,s.jsx)(et.y,{dataKey:"total",name:"Spent",radius:[4,4,0,0],fill:p.danger}),(0,s.jsx)(et.y,{dataKey:"savings",name:"Savings",radius:[4,4,0,0],fill:p.secondary})]})})})}),(0,s.jsx)("div",{className:"flex flex-col gap-4 w-full",children:x.map(e=>{let t=l?!l(e.period):function(e){let[t,a,s]=e.split("-").map(Number),n=new Date(t,a-1,s),r=new Date;return n<new Date(r.getFullYear(),r.getMonth(),r.getDate())}(e.period);return(0,s.jsxs)("div",{className:"flex items-center justify-between min-w-0 text-base gap-3 bg-muted px-4 py-3 rounded-xl",children:[(0,s.jsx)("span",{className:"truncate font-medium text-sm sm:text-base",children:e.label}),t?(0,s.jsxs)(f,{open:o===e.period,onOpenChange:e=>{e||c(null)},children:[(0,s.jsx)(v,{asChild:!0,children:(0,s.jsx)(D.$,{size:"sm",variant:"outline",className:"text-xs sm:text-sm",onClick:()=>{c(e.period),m(e.budget)},children:"Edit"})}),(0,s.jsx)(y,{className:"w-[92vw] max-w-sm max-h-[90vh] overflow-y-auto rounded-2xl px-5 py-4",children:(0,s.jsxs)("form",{onSubmit:e=>{e.preventDefault(),o&&(i(o,u),c(null))},className:"space-y-4",children:[(0,s.jsxs)("div",{className:"space-y-1.5",children:[(0,s.jsxs)(g.L3,{className:"text-base font-semibold",children:["Edit Budget for ",e.label]}),(0,s.jsx)(g.rr,{className:"text-sm text-muted-foreground",children:"Set a custom amount for this period."})]}),(0,s.jsx)($.p,{type:"number",value:u,onChange:e=>m(Number(e.target.value)),className:"text-base py-2",autoFocus:!0,required:!0,min:0,step:1}),(0,s.jsx)(D.$,{size:"sm",type:"submit",className:"w-full mt-3",children:"Save"})]})})]}):(0,s.jsx)("span",{className:"text-muted-foreground text-xs sm:text-sm",children:"Ongoing"})]},e.period)})})]})}function er(e){let[t,a,s]=e.split("-").map(Number),n=s<=15?15:new Date(t,a,0).getDate();return new Date(t,a-1,n,23,59,59,999)}function ei(e){let t=new Date,[a,s,n]=e.split("-").map(Number),r=new Date(a,s-1,n),i=er(e);return t>=r&&t<=i}function el(e){let{periods:t,periodBudgets:a,formatPeriodLabel:n,onBudgetChange:r,currentPeriodKey:i,currentBudget:l}=e,d=t.filter(e=>{let[t,s]=e;return s.total>0||a.hasOwnProperty(t)}),o={...a,[i]:l};return(0,s.jsxs)(f,{children:[(0,s.jsx)(v,{asChild:!0,children:(0,s.jsxs)(D.$,{variant:"outline",className:"w-full justify-start gap-2",children:[(0,s.jsx)(J.A,{className:"w-4 h-4"}),"View Spending Chart"]})}),(0,s.jsx)(y,{className:"w-[96vw] max-w-3xl h-[90vh] p-4 sm:p-5 lg:p-6 rounded-2xl overflow-hidden",children:(0,s.jsxs)("div",{className:"flex flex-col h-full space-y-6",children:[(0,s.jsxs)(N,{children:[(0,s.jsx)(k,{className:"text-lg sm:text-xl font-semibold",children:"Spending Chart"}),(0,s.jsx)(S,{className:"text-sm sm:text-base text-muted-foreground",children:"A visual breakdown of your spending and savings across periods."})]}),(0,s.jsx)("div",{className:"flex-1 overflow-y-auto rounded-xl pr-2",children:(0,s.jsx)(en,{periods:d,periodBudgets:o,formatPeriodLabel:e=>{let[t,a,s]=e.split("-").map(Number),r=n("".concat(t,"-").concat(String(a).padStart(2,"0"),"-").concat(s<=15?"01":"16"));return ei(e)?"".concat(r):r},onBudgetChange:(e,t)=>{new Date>er(e)&&r(e,t)},disableEditFor:e=>ei(e)||function(e){let[t,a,s]=e.split("-").map(Number),n=new Date(t,a-1,s);return new Date<n}(e)})})]})})]})}function ed(e){let t=e.getFullYear(),a=e.getMonth()+1,s=e.getDate();return"".concat(t,"-").concat(String(a).padStart(2,"0"),"-").concat(s<=15?1:16)}function eo(e){let{budgetId:t,entries:a,budget:r,setBudget:i,onPayDebt:l,isEditingBudget:d,setIsEditingBudget:o,recurring:c}=e,[u,m]=(0,n.useState)(r.toString()),[x,g]=(0,n.useState)(!1);(0,n.useEffect)(()=>{m(r.toString())},[r]);let h=new Date,p=h.getFullYear(),f=h.getMonth(),v=h.getDate(),b="".concat(p,"-").concat(String(f+1).padStart(2,"0"),"-").concat(v<=15?"01":"16"),{updateBudget:j,currentBudget:y,periodBudgets:N,lastResetDate:w}=function(e,t){let[a,s]=(0,n.useState)({currentBudget:t,periodBudgets:{},lastResetDate:""}),r=(0,n.useRef)(!1),i=(0,n.useRef)(null);return(0,n.useEffect)(()=>{(async()=>{try{let r=await O(e);if(r){var a,n,l;let e={currentBudget:null!=(a=r.currentBudget)?a:t,periodBudgets:null!=(n=r.periodBudgets)?n:{},lastResetDate:null!=(l=r.lastResetDate)?l:""};s(e),i.current=e}}catch(e){console.error("Failed to load budget from IndexedDB:",e)}finally{r.current=!0}})()},[e,t]),(0,n.useEffect)(()=>{r.current&&JSON.stringify(i.current)!==JSON.stringify(a)&&(F(e,a).catch(e=>console.error("Failed to save budget to IndexedDB:",e)),i.current=a)},[e,a]),{budgetData:a,updateBudget:(0,n.useCallback)((e,t)=>{s(a=>({currentBudget:e,periodBudgets:{...a.periodBudgets,[t]:e},lastResetDate:t}))},[]),currentBudget:a.currentBudget,periodBudgets:a.periodBudgets,lastResetDate:a.lastResetDate}}(t,r),k=(0,n.useCallback)(()=>!!c&&w!==b&&(j(N[b]||y,b),!0),[c,b,w,N,y,j]);(0,n.useEffect)(()=>{k()},[k]);let{percentageUsed:S}=function(e){let{entries:t,budgetId:a,budget:s}=e,{currentPeriodEntries:r,totalSpent:i,remaining:l,percentageUsed:d}=(0,n.useMemo)(()=>{let{start:e,end:n}=function(){let e=new Date,t=e.getFullYear(),a=e.getMonth(),s=15>=e.getDate()?1:16,n=1===s?15:new Date(t,a+1,0).getDate();return{start:new Date(t,a,s),end:new Date(t,a,n,23,59,59,999)}}(),r=t.filter(e=>e.budgetId===a).filter(t=>{let a=new Date(t.date);return a>=e&&a<=n}),i=r.reduce((e,t)=>e+t.amount,0),l=s-i,d=i/s*100;return{currentPeriodEntries:r,totalSpent:i,remaining:l,percentageUsed:d}},[t,a,s]);return{currentPeriodEntries:r,totalSpent:i,remaining:l,percentageUsed:d}}({entries:a,budgetId:t,budget:r}),{periods:D,totalSavings:C,totalDebt:B}=function(e){let{entries:t,budgetId:a,periodBudgets:s}=e;return(0,n.useMemo)(()=>{let e={},n=t.filter(e=>e.budgetId===a);Array.from(new Set([...n.map(e=>ed(new Date(e.date))),...Object.keys(s)])).forEach(t=>{if(!e[t]){var a;e[t]={total:0,budget:null!=(a=s[t])?a:0,savings:0,items:{},debtPayments:0}}}),n.forEach(t=>{var a,n;let r=ed(new Date(t.date)),i=null!=(n=e[r])?n:e[r]={total:0,budget:null!=(a=s[r])?a:0,savings:0,items:{},debtPayments:0};if("Debt Payment"===t.item)i.debtPayments+=Math.abs(t.amount);else{i.total+=t.amount;let e=t.item||"Unspecified";i.items[e]=(i.items[e]||0)+t.amount}}),Object.values(e).forEach(e=>{e.savings=e.budget-e.total});let r=Object.entries(e).sort((e,t)=>{let[a]=e,[s]=t;return a<s?-1:1}),i=0,l=0;r.forEach(e=>{let[,t]=e;t.total>t.budget&&(i+=t.total-t.budget),l+=t.debtPayments});let d=Math.max(0,i-l),o=r.map(e=>{let[,t]=e;return t.budget>t.total?t.budget-t.total:0}),c=o.reduce((e,t)=>e+t,0),u=r.reduce((e,t)=>{let[,a]=t;return e+a.total},0)/(r.length||1),m=o.reduce((e,t)=>e+t,0)/(o.length||1);return{periodData:e,periods:r,savingsPerPeriod:o,averagePeriodExpenses:u,averagePeriodSavings:m,totalSavings:c,totalDebt:d,netSavings:c-d}},[t,a,s])}({entries:a,budgetId:t,periodBudgets:{...N,[b]:r}}),[E,A]=D.reduce((e,t)=>t[1].total>e[1].total?t:e,["",{total:0,items:{},budget:0,savings:0,debtPayments:0}]),L=D.map(e=>{let[t,a]=e,[s,n]=Object.entries(a.items).reduce((e,t)=>t[1]>e[1]?t:e,["",0]);return{period:t,item:s,amount:n}}),_=e=>{let[t,a,s]=e.split("-").map(Number),n=new Date(t,a-1).toLocaleString("default",{month:"short"}),r=1===s?15:new Date(t,a,0).getDate();return"".concat(n," ").concat(s,"-").concat(r)};return(0,s.jsxs)("div",{className:"px-4 py-3 bg-white dark:bg-gray-800 rounded-xl shadow-sm space-y-4",children:[(0,s.jsx)(G,{isEditingBudget:d,budget:r,percentageUsed:S,entries:a,tempBudget:u,setTempBudget:m,handleBudgetSave:()=>{let e=parseFloat(u)||0;j(e,b),o(!1),i(e)},handleBudgetCancel:()=>{m(r.toString()),o(!1)},setIsEditingBudget:o,setShowBudgetHistory:g}),c&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(el,{periods:D,periodBudgets:N,formatPeriodLabel:_,currentPeriodKey:b,currentBudget:r,onBudgetChange:(e,t)=>j(t,e)}),(0,s.jsx)(V,{totalDebt:B,totalSavings:C,onPayDebt:l}),E&&(0,s.jsx)(P,{peakPeriodKey:E,peakPeriodData:A,formatPeriodLabel:_})]}),(0,s.jsx)(z,{expenses:L.slice(0,2),formatPeriodLabel:_,activePeriodKey:b}),(0,s.jsx)(M,{showBudgetHistory:x,setShowBudgetHistory:g,periodBudgets:N,updateBudget:j,formatPeriodLabel:_,currentPeriodKey:b,currentBudget:r})]})}var ec=a(38715),eu=a(66474),em=a(47863);function ex(e){let{...t}=e;return(0,s.jsx)(ec.bL,{"data-slot":"select",...t})}function eg(e){let{...t}=e;return(0,s.jsx)(ec.WT,{"data-slot":"select-value",...t})}function eh(e){let{className:t,size:a="default",children:n,...r}=e;return(0,s.jsxs)(ec.l9,{"data-slot":"select-trigger","data-size":a,className:(0,p.cn)("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...r,children:[n,(0,s.jsx)(ec.In,{asChild:!0,children:(0,s.jsx)(eu.A,{className:"size-4 opacity-50"})})]})}function ep(e){let{className:t,children:a,position:n="popper",...r}=e;return(0,s.jsx)(ec.ZL,{children:(0,s.jsxs)(ec.UC,{"data-slot":"select-content",className:(0,p.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md","popper"===n&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...r,children:[(0,s.jsx)(ev,{}),(0,s.jsx)(ec.LM,{className:(0,p.cn)("p-1","popper"===n&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:a}),(0,s.jsx)(eb,{})]})})}function ef(e){let{className:t,children:a,...n}=e;return(0,s.jsxs)(ec.q7,{"data-slot":"select-item",className:(0,p.cn)("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",t),...n,children:[(0,s.jsx)("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:(0,s.jsx)(ec.VF,{children:(0,s.jsx)(R.A,{className:"size-4"})})}),(0,s.jsx)(ec.p4,{children:a})]})}function ev(e){let{className:t,...a}=e;return(0,s.jsx)(ec.PP,{"data-slot":"select-scroll-up-button",className:(0,p.cn)("flex cursor-default items-center justify-center py-1",t),...a,children:(0,s.jsx)(em.A,{className:"size-4"})})}function eb(e){let{className:t,...a}=e;return(0,s.jsx)(ec.wn,{"data-slot":"select-scroll-down-button",className:(0,p.cn)("flex cursor-default items-center justify-center py-1",t),...a,children:(0,s.jsx)(eu.A,{className:"size-4"})})}var ej=a(4884);function ey(e){let{className:t,...a}=e;return(0,s.jsx)(ej.bL,{"data-slot":"switch",className:(0,p.cn)("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",t),...a,children:(0,s.jsx)(ej.zi,{"data-slot":"switch-thumb",className:(0,p.cn)("bg-background dark:data-[state=unchecked]:bg-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0")})})}var eN=a(48698);function ew(e){let{...t}=e;return(0,s.jsx)(eN.bL,{"data-slot":"dropdown-menu",...t})}function ek(e){let{...t}=e;return(0,s.jsx)(eN.l9,{"data-slot":"dropdown-menu-trigger",...t})}function eS(e){let{className:t,sideOffset:a=4,...n}=e;return(0,s.jsx)(eN.ZL,{children:(0,s.jsx)(eN.UC,{"data-slot":"dropdown-menu-content",sideOffset:a,className:(0,p.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",t),...n})})}function eD(e){let{className:t,inset:a,variant:n="default",...r}=e;return(0,s.jsx)(eN.q7,{"data-slot":"dropdown-menu-item","data-inset":a,"data-variant":n,className:(0,p.cn)("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...r})}function eC(e){let{className:t,...a}=e;return(0,s.jsx)(eN.wv,{"data-slot":"dropdown-menu-separator",className:(0,p.cn)("bg-border -mx-1 my-1 h-px",t),...a})}var eB=a(24717);function ez(e){let{open:t,onOpenChange:a,onCreate:r}=e,[i,l]=(0,n.useState)(""),[d,o]=(0,n.useState)(!1);return(0,s.jsx)(f,{open:t,onOpenChange:a,children:(0,s.jsxs)(y,{className:"max-w-sm",children:[(0,s.jsx)(N,{children:(0,s.jsx)(k,{children:"Create New Budget"})}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)($.p,{type:"text",placeholder:"Budget Name",value:i,onChange:e=>l(e.target.value)}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(ey,{id:"recurring-toggle",checked:d,onCheckedChange:o}),(0,s.jsx)("label",{htmlFor:"recurring-toggle",className:"text-sm",children:"Recurring"})]}),(0,s.jsx)(D.$,{onClick:()=>{r(i,d),l(""),o(!1)},children:"Create Budget"})]})]})})}function eE(){var e,t;let[a,r,c]=function(e,t){let[a,s]=(0,n.useState)(t),[r,d]=(0,n.useState)(!1);(0,n.useEffect)(()=>{(async()=>{try{let t=await l(),a=await t.get(i,e);void 0!==a&&s(a)}catch(t){console.error('IndexedDB read error for key "'.concat(e,'":'),t)}finally{d(!0)}})()},[e]);let o=(0,n.useCallback)(async t=>{try{let n="function"==typeof t?t(a):t,r=await l();await r.put(i,n,e),s(n)}catch(t){console.error('IndexedDB write error for key "'.concat(e,'":'),t)}},[e,a]);return r?[a,o,!0]:[t,()=>{},!1]}("budgets",[]),[m,x]=(0,n.useState)(0),[g,h]=(0,n.useState)(null),[p,b]=(0,n.useState)(!1),[j,w]=(0,n.useState)(!1),[S,z]=(0,n.useState)(""),[E,P]=(0,n.useState)(!1),[A,L]=(0,n.useState)(!1),[F,O]=(0,n.useState)(!1),[_,M]=(0,n.useState)(null);if((0,n.useEffect)(()=>{c&&0===a.length&&r([{id:(0,d.A)(),name:"Budget 1",entries:[],budget:5e3,recurring:!0}])},[c,a.length,r]),(0,n.useEffect)(()=>{if(_){let e=a.findIndex(e=>e.id===_);-1!==e&&(x(e),M(null))}},[a,_]),(0,n.useEffect)(()=>{var e;z((null==(e=a[m])?void 0:e.name)||"")},[m,a]),!c||0===a.length)return(0,s.jsx)("p",{children:"Loading budgets..."});let I=a[m];if(!I)return(0,s.jsx)("p",{children:"Loading current budget..."});let H=e=>{r(t=>{let a=[...t];return a[m]={...a[m],...e},a})},R=()=>h(null);return(0,s.jsxs)("main",{className:"w-full max-w-7xl mx-auto px-1 md:px-6 lg:px-12 pt-4 space-y-8",children:[(0,s.jsxs)("div",{className:"flex flex-wrap items-center gap-3 mb-4",children:[(0,s.jsx)("label",{className:"text-sm font-medium",children:"Budget for:"}),(0,s.jsxs)("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[(0,s.jsxs)(ex,{value:I.id,onValueChange:e=>{let t=a.findIndex(t=>t.id===e);-1!==t&&(x(t),h(null))},children:[(0,s.jsx)(eh,{className:"w-[160px] sm:w-[200px]",children:(0,s.jsx)(eg,{placeholder:"Select budget"})}),(0,s.jsx)(ep,{children:a.map(e=>(0,s.jsxs)(ef,{value:e.id,children:[e.name,e.recurring&&(0,s.jsx)(u.jEl,{className:"ml-2 w-4 h-4 text-muted-foreground",title:"Recurring"})]},e.id))})]}),(0,s.jsx)(f,{open:j,onOpenChange:w,children:(0,s.jsxs)(y,{className:"max-w-sm",children:[(0,s.jsx)(N,{children:(0,s.jsx)(k,{children:"Edit Budget"})}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"space-y-1.5",children:[(0,s.jsx)("label",{htmlFor:"budget-name",className:"text-sm font-medium pb-2 block",children:"Budget Name"}),(0,s.jsx)($.p,{id:"budget-name",value:S,onChange:e=>z(e.target.value)})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,s.jsx)(ey,{id:"edit-recurring-toggle",checked:(null==(e=a[m])?void 0:e.recurring)||!1,onCheckedChange:e=>{let t=[...a];t[m].recurring=e,r(t)}}),(0,s.jsx)("label",{htmlFor:"edit-recurring-toggle",className:"text-sm font-medium",children:"Recurring"})]}),(0,s.jsx)("div",{className:"flex justify-end gap-2",children:(0,s.jsx)(D.$,{onClick:()=>{if(""!==S.trim()){let e=[...a];e[m].name=S.trim(),r(e),w(!1)}},children:"Save Changes"})})]})]})}),(0,s.jsxs)(ew,{children:[(0,s.jsx)(ek,{asChild:!0,children:(0,s.jsx)(D.$,{size:"sm",variant:"outline",children:(0,s.jsx)(eB.IXD,{className:"w-4 h-4"})})}),(0,s.jsxs)(eS,{align:"end",className:"w-44",children:[(0,s.jsxs)(eD,{onClick:()=>w(!0),children:[(0,s.jsx)(u.SG1,{className:"mr-2 w-4 h-4"}),"Edit Budget"]}),0!==m&&(0,s.jsxs)(eD,{onClick:()=>L(!0),children:[(0,s.jsx)(u.Q_v,{className:"mr-2 w-4 h-4 text-red-500"}),"Delete Budget"]}),(0,s.jsx)(eC,{}),(0,s.jsxs)(eD,{onClick:()=>P(!0),children:[(0,s.jsx)(u.GGD,{className:"mr-2 w-4 h-4"}),"New Budget"]})]})]}),(0,s.jsx)(C,{open:A,onClose:()=>L(!1),onConfirm:()=>{let e=[...a];e.splice(m,1),r(e),x(0),w(!1)},title:"Delete Budget",description:'Are you sure you want to delete "'.concat(null==(t=a[m])?void 0:t.name,'"? This action cannot be undone.'),confirmLabel:"Delete",cancelLabel:"Cancel",destructive:!0}),(0,s.jsx)(ez,{open:E,onOpenChange:P,onCreate:(e,t)=>{let s=e.trim();if(!s)return;if(a.some(e=>e.name.toLowerCase()===s.toLowerCase()))return void alert("A budget with this name already exists.");let n={id:(0,d.A)(),name:s,entries:[],budget:5e3,recurring:t};P(!1),r(e=>[...e,n]),M(n.id)}})]})]}),(0,s.jsxs)("section",{className:"flex flex-col lg:flex-row gap-6",children:[(0,s.jsx)("div",{className:"lg:w-2/3 space-y-3",children:(0,s.jsx)("div",{className:"rounded-2xl bg-muted/40 dark:bg-muted/10 shadow-sm",children:(0,s.jsx)(eo,{budgetId:I.id,entries:I.entries,budget:I.budget,setBudget:e=>H({budget:e}),isEditingBudget:F,setIsEditingBudget:O,onPayDebt:e=>{H({entries:[{id:(0,d.A)(),budgetId:I.id,amount:e,date:new Date().toISOString(),item:"Debt Payment"},...I.entries]})},recurring:I.recurring})})}),(0,s.jsxs)("div",{className:"lg:w-1/3 space-y-3",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold mb-2",children:"Your Expenses"}),(0,s.jsx)(B,{entries:I.entries,onDelete:e=>{H({entries:I.entries.filter(t=>t.id!==e)})},onEdit:e=>{h(e),b(!0)},recurring:I.recurring})]})]}),(0,s.jsx)("div",{className:"fixed bottom-6 right-6 z-50",children:(0,s.jsxs)(f,{open:p,onOpenChange:b,children:[(0,s.jsx)(v,{asChild:!0,children:(0,s.jsx)(D.$,{className:"h-12 w-12 p-0 rounded-full bg-blue-600 hover:bg-blue-700 text-white shadow-xl flex items-center justify-center","aria-label":"Add Expense",children:(0,s.jsx)(u.GGD,{size:28,strokeWidth:3})})}),(0,s.jsxs)(y,{className:"max-w-md",children:[(0,s.jsx)(N,{children:(0,s.jsx)(k,{children:g?"Edit Expense":"Add Expense"})}),(0,s.jsx)(o,{onAdd:e=>{H({entries:[e,...I.entries]}),b(!1)},onUpdate:e=>{H({entries:I.entries.map(t=>t.id===e.id?e:t)}),h(null)},editingEntry:g,cancelEdit:()=>{R(),b(!1)},budgetId:I.id})]})]})})]})}},59434:(e,t,a)=>{"use strict";a.d(t,{cn:()=>r});var s=a(52596),n=a(39688);function r(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,n.QP)((0,s.$)(t))}},62523:(e,t,a)=>{"use strict";a.d(t,{p:()=>r});var s=a(95155);a(12115);var n=a(59434);function r(e){let{className:t,type:a,...r}=e;return(0,s.jsx)("input",{type:a,"data-slot":"input",className:(0,n.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",t),...r})}},95661:(e,t,a)=>{Promise.resolve().then(a.bind(a,55180))}},e=>{var t=t=>e(e.s=t);e.O(0,[777,844,693,194,441,684,358],()=>t(95661)),_N_E=e.O()}]);